{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/amalegalsolutions/Desktop/jivoenergy/src/components/NewGlobe.tsx"],"sourcesContent":["\"use client\"\nimport { useState, useEffect, useMemo, useRef } from 'react'\nimport dynamic from 'next/dynamic'\nimport { scaleSequentialSqrt } from 'd3-scale'\nimport { interpolateYlOrRd } from 'd3-scale-chromatic'\nimport type { GlobeMethods } from 'react-globe.gl'\n\nconst Globe = dynamic(() => import('react-globe.gl'), {\n  ssr: false,\n  loading: () => <div>Loading...</div>\n})\n\n// Define regions to include\nconst INCLUDED_REGIONS = [\n  'Africa',\n  'Middle East',\n  'Asia'\n]\n\n// Region-specific color scales\nconst regionColors = {\n  'Africa': scaleSequentialSqrt<string>()\n    .domain([0, 1])\n    .range(['#1a237e', '#0d47a1', '#01579b', '#0277bd', '#039be5']), // Deep blues\n  'Middle East': scaleSequentialSqrt<string>()\n    .domain([0, 1])\n    .range(['#006064', '#00838f', '#0097a7', '#00acc1', '#00bcd4']), // Cyan blues\n  'Asia': scaleSequentialSqrt<string>()\n    .domain([0, 1])\n    .range(['#004d40', '#00695c', '#00796b', '#00897b', '#009688']) // Teal blues\n}\n\nconst NewGlobe = () => {\n  const [countries, setCountries] = useState({ features: [] })\n  const [hoverD, setHoverD] = useState<any>(null)\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 })\n  const [dimensions, setDimensions] = useState({ width: 800, height: 600 })\n  const globeRef = useRef<GlobeMethods | undefined>(undefined)\n  const [view, setView] = useState({ lat: 30, lng: 45, altitude: 2 })\n  const [isGlobeReady, setIsGlobeReady] = useState(false)\n\n  useEffect(() => {\n    // Set initial dimensions\n    setDimensions({\n      width: window.innerWidth,\n      height: window.innerHeight\n    })\n\n    // Update dimensions on window resize\n    const handleResize = () => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight\n      })\n    }\n\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  useEffect(() => {\n    // load data\n    fetch('https://raw.githubusercontent.com/vasturiano/react-globe.gl/master/example/datasets/ne_110m_admin_0_countries.geojson')\n      .then(res => res.json())\n      .then(data => {\n        // Filter countries to only include specified regions\n        const filteredFeatures = data.features.filter((feature: any) => {\n          const region = feature.properties.REGION_UN\n          return INCLUDED_REGIONS.includes(region)\n        })\n        setCountries({ ...data, features: filteredFeatures })\n      })\n      .catch(err => {\n        console.error('Error loading countries data:', err)\n        setCountries({ features: [] })\n      })\n  }, [])\n\n  const colorScale = scaleSequentialSqrt(interpolateYlOrRd)\n\n  // GDP per capita (avoiding countries with small pop)\n  const getVal = (feat: any) => feat.properties.GDP_MD_EST / Math.max(1e5, feat.properties.POP_EST)\n\n  const maxVal = useMemo(\n    () => Math.max(...countries.features.map(getVal)),\n    [countries]\n  )\n  colorScale.domain([0, maxVal])\n\n  const getPolygonColor = (d: any): string => {\n    if (d === hoverD) return '#00b0ff' // Bright electric blue for hover\n    const val = getVal(d)\n    const region = d.properties.REGION_UN\n    const colorScale = regionColors[region as keyof typeof regionColors] || regionColors['Africa']\n    return colorScale(val / maxVal)\n  }\n\n  const getPolygonSideColor = (d: any): string => {\n    const region = d.properties.REGION_UN\n    switch (region) {\n      case 'Africa':\n        return 'rgba(2, 119, 189, 0.15)' // Matching Africa's blue\n      case 'Middle East':\n        return 'rgba(0, 172, 193, 0.15)' // Matching Middle East's cyan\n      case 'Asia':\n        return 'rgba(0, 137, 123, 0.15)' // Matching Asia's teal\n      default:\n        return 'rgba(0, 100, 255, 0.15)'\n    }\n  }\n\n  const handlePolygonHover = (polygon: any, event: any) => {\n    setHoverD(polygon)\n    if (polygon) {\n      setTooltipPosition({ x: event.clientX, y: event.clientY })\n    }\n  }\n\n  useEffect(() => {\n    if (isGlobeReady && globeRef.current) {\n      globeRef.current.pointOfView({ lat: 30, lng: 45, altitude: 2 })\n    }\n  }, [isGlobeReady])\n\n  const handleZoom = (newView: any) => {\n    if (globeRef.current) {\n      const coords = globeRef.current.getCoords(newView.lat, newView.lng, newView.altitude)\n      if (coords) {\n        const geoCoords = globeRef.current.toGeoCoords(coords)\n        setView(geoCoords)\n      }\n    }\n  }\n\n  return (\n    <div className=\"relative w-full h-full\">\n      <Globe\n        ref={globeRef}\n        onGlobeReady={() => setIsGlobeReady(true)}\n        globeImageUrl=\"//cdn.jsdelivr.net/npm/three-globe/example/img/earth-night.jpg\"\n        backgroundImageUrl=\"//cdn.jsdelivr.net/npm/three-globe/example/img/night-sky.png\"\n        lineHoverPrecision={0}\n        polygonsData={countries.features.filter((d: any) => d.properties.ISO_A2 !== 'AQ')}\n        polygonAltitude={(d: any) => d === hoverD ? 0.12 : 0.06}\n        polygonCapColor={getPolygonColor}\n        polygonSideColor={getPolygonSideColor}\n        polygonStrokeColor={() => 'rgba(255, 255, 255, 0.75)'}\n        polygonLabel={({ properties: d }: any) => \n          `${d.ADMIN} (${d.ISO_A2}):\\nGDP: ${d.GDP_MD_EST} M$\\nPopulation: ${d.POP_EST}`\n        }\n        onPolygonHover={handlePolygonHover}\n        onZoom={handleZoom}\n        polygonsTransitionDuration={300}\n        width={dimensions.width}\n        height={dimensions.height}\n        enablePointerInteraction={true}\n        animateIn={false}\n        rendererConfig={{ antialias: true, alpha: true, preserveDrawingBuffer: true }}\n        pointerEventsFilter={(obj: any) => obj.type === 'Mesh'}\n      />\n      {hoverD && (\n        <div\n          className=\"fixed z-[100] bg-black/80 text-white p-4 rounded-lg shadow-lg pointer-events-none\"\n          style={{\n            left: tooltipPosition.x + 10,\n            top: tooltipPosition.y + 10,\n            transform: 'translate(-50%, -50%)',\n            minWidth: '200px'\n          }}\n        >\n          <h3 className=\"text-lg font-bold mb-2\">{hoverD.properties.ADMIN}</h3>\n          <p className=\"text-sm\">Country Code: {hoverD.properties.ISO_A2}</p>\n          <p className=\"text-sm\">GDP: ${hoverD.properties.GDP_MD_EST.toLocaleString()} M</p>\n          <p className=\"text-sm\">Population: {hoverD.properties.POP_EST.toLocaleString()}</p>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default NewGlobe "],"names":[],"mappings":"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","debugId":null}}]
}